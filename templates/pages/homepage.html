{% extends 'base/index.html' %}
{% load static %}

{% block title %}Home - Everest Carpet Industry{% endblock %}
{% block description %}Authentic handmade Tibetan carpets since 1986. Custom orders, traditional designs, 100% Tibetan wool, and expert craftsmanship.{% endblock %}
{% block body_class %}home-page{% endblock %}

{% block content %}


<!-- Hero Section - Fixed Alignment -->
<section class="hero-section position-relative overflow-hidden bg-light-subtle">
  <div class="container position-relative">
    <div class="row align-items-center min-vh-85">
      <div class="col-lg-6 order-2 order-lg-1 py-5 py-lg-0" data-aos="fade-right">
        <div class="hero-content-container bg-white bg-opacity-95 rounded-4 p-4 p-md-5 shadow-sm">
          <div class="badge mb-4">
            <span class="d-inline-flex align-items-center px-3 py-2 rounded-pill bg-primary bg-opacity-10 text-primary border-0">
              <i class="bi bi-award me-2"></i>Est. 1986
            </span>
          </div>
          
          <h1 class="display-4 fw-bold mb-4">
            <span class="d-block">Authentic</span>
            <span class="d-block text-primary">Tibetan Carpets</span>
            <span class="d-block fs-3 fw-normal text-muted mt-2">Handcrafted with Tradition</span>
          </h1>
          
          <p class="lead mb-4 text-muted">
            Preserving the ancient art of Tibetan carpet weaving with traditional designs, 
            100% Tibetan wool, and expert craftsmanship for over three decades.
          </p>
          
          <div class="hero-actions d-flex flex-wrap gap-3 mb-4">
            <a href="{% url 'products' %}" class="btn btn-primary btn-lg px-4 py-3">
              <i class="bi bi-grid me-2"></i> View Collections
            </a>
            <a href="{% url 'contact_us' %}" class="btn btn-outline-primary btn-lg px-4 py-3">
              <i class="bi bi-pencil-square me-2"></i> Custom Order
            </a>
          </div>
          
          <div class="stats-container d-flex flex-wrap gap-3 gap-md-4 pt-3 border-top">
            <div class="stat-item text-center">
              <div class="display-5 fw-bold text-primary mb-1">35+</div>
              <div class="small text-muted">Years Experience</div>
            </div>
            <div class="stat-item text-center">
              <div class="display-5 fw-bold text-primary mb-1">20K</div>
              <div class="small text-muted">Sq Ft/Month</div>
            </div>
            <div class="stat-item text-center">
              <div class="display-5 fw-bold text-primary mb-1">50+</div>
              <div class="small text-muted">Countries Served</div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="col-lg-6 order-1 order-lg-2" data-aos="fade-left" data-aos-delay="200">
        <div class="hero-visual position-relative">
          <div class="image-frame rounded-4 overflow-hidden shadow-lg" style="height: 500px;">
            <img src="https://images.unsplash.com/photo-1600166898405-da9535204843?auto=format&fit=crop&w=800&h=600&q=80" 
                 alt="Traditional Tibetan Carpet Detail" 
                 class="img-fluid w-100 h-100 object-fit-cover"
                 loading="eager"
                 width="800"
                 height="600">
            <div class="floating-badge bg-white border border-primary border-opacity-25 rounded-pill px-3 py-2 d-inline-flex align-items-center position-absolute bottom-3 start-3 shadow-sm">
              <i class="bi bi-star-fill text-primary me-2"></i>
              <span class="fw-medium">100% Handmade</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Heritage Section -->
<section id="heritage" class="py-5 py-lg-6 bg-light">
  <div class="container">
    <div class="row align-items-center g-4 g-lg-5">
      <div class="col-lg-6" data-aos="fade-right">
        <div class="heritage-visual position-relative">
          <div class="main-image rounded-4 overflow-hidden shadow" style="height: 500px;">
            <img src="https://images.unsplash.com/photo-1600166898405-da9535204843?auto=format&fit=crop&w=800&h=600&q=80" 
                 alt="Tibetan Carpet Weaving Process" 
                 class="img-fluid w-100 h-100 object-fit-cover"
                 loading="lazy"
                 width="800"
                 height="600">
          </div>
        </div>
      </div>
      
      <div class="col-lg-6" data-aos="fade-left">
        <div class="heritage-content">
          <h2 class="display-5 fw-bold mb-4">
            Preserving <span class="text-primary">Tibetan Heritage</span> Through Craftsmanship
          </h2>
          
          <p class="lead mb-4">
            With decades of experience in Tibetan Art and Antiques, we bring authentic cultural 
            knowledge to every carpet we create since 1986.
          </p>
          
          <div class="features-grid mb-5">
            <div class="row g-3">
              <div class="col-md-6">
                <div class="feature-card p-4 rounded-3 border border-light-subtle bg-white h-100">
                  <div class="feature-icon bg-primary bg-opacity-10 rounded-3 p-3 mb-3 d-inline-flex">
                    <i class="bi bi-flower1 text-primary fs-4"></i>
                  </div>
                  <h5 class="fw-bold mb-2">Traditional Designs</h5>
                  <p class="small mb-0 text-muted">Authentic Tibetan patterns with cultural significance</p>
                </div>
              </div>
              <div class="col-md-6">
                <div class="feature-card p-4 rounded-3 border border-light-subtle bg-white h-100">
                  <div class="feature-icon bg-primary bg-opacity-10 rounded-3 p-3 mb-3 d-inline-flex">
                    <i class="bi bi-droplet text-primary fs-4"></i>
                  </div>
                  <h5 class="fw-bold mb-2">Natural Dyes</h5>
                  <p class="small mb-0 text-muted">Eco-friendly vegetable and mineral dyes</p>
                </div>
              </div>
            </div>
          </div>
          
          <a href="{% url 'about_us' %}" class="btn btn-primary btn-lg px-4">
            <i class="bi bi-book me-2"></i> Discover Our Story
          </a>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Collections Section -->
<section class="collections-section py-5 py-lg-6">
  <div class="container">
    <div class="text-center mb-5" data-aos="fade-up">
      <h2 class="display-5 fw-bold mb-3">Timeless <span class="text-primary">Masterpieces</span></h2>
      <p class="lead text-muted mx-auto" style="max-width: 600px;">
        Explore our distinctive categories showcasing Tibetan carpet artistry
      </p>
    </div>
    
    <div class="row g-4 justify-content-center">
      <div class="col-lg-4" data-aos="fade-up">
        <div class="card border-0 shadow-sm h-100">
          <div class="card-img-top overflow-hidden" style="height: 250px;">
            <img src="https://images.unsplash.com/photo-1600166898405-da9535204843?auto=format&fit=crop&w=600&h=400&q=80" 
                 alt="Traditional Tibetan Carpets" 
                 class="img-fluid w-100 h-100 object-fit-cover"
                 loading="lazy"
                 width="600"
                 height="400">
          </div>
          <div class="card-body p-4">
            <h3 class="h5 fw-bold mb-3">Classic Tibetan Patterns</h3>
            <p class="text-muted mb-3">
              Dragons, lotus flowers, and auspicious symbols in vibrant colors.
            </p>
            <a href="{% url 'products' %}?category=traditional" class="btn btn-outline-primary w-100">
              View Collection
            </a>
          </div>
        </div>
      </div>
      
      <div class="col-lg-4" data-aos="fade-up" data-aos-delay="100">
        <div class="card border-primary border-2 shadow-sm h-100">
          <div class="card-img-top overflow-hidden" style="height: 250px;">
            <img src="https://images.unsplash.com/photo-1600166898405-da9535204843?auto=format&fit=crop&w=600&h=400&q=80" 
                 alt="Antique Reproduction Carpets" 
                 class="img-fluid w-100 h-100 object-fit-cover"
                 loading="lazy"
                 width="600"
                 height="400">
          </div>
          <div class="card-body p-4">
            <h3 class="h5 fw-bold mb-3">Historical Reproductions</h3>
            <p class="text-muted mb-3">
              Faithful recreations of antique carpets with authentic aging techniques.
            </p>
            <a href="{% url 'products' %}?category=antique" class="btn btn-primary w-100">
              View Collection
            </a>
          </div>
        </div>
      </div>
      
      <div class="col-lg-4" data-aos="fade-up" data-aos-delay="200">
        <div class="card border-0 shadow-sm h-100">
          <div class="card-img-top overflow-hidden" style="height: 250px;">
            <img src="https://images.unsplash.com/photo-1600166898405-da9535204843?auto=format&fit=crop&w=600&h=400&q=80" 
                 alt="Contemporary Modern Carpets" 
                 class="img-fluid w-100 h-100 object-fit-cover"
                 loading="lazy"
                 width="600"
                 height="400">
          </div>
          <div class="card-body p-4">
            <h3 class="h5 fw-bold mb-3">Contemporary Designs</h3>
            <p class="text-muted mb-3">
              Modern art-inspired patterns for contemporary interiors.
            </p>
            <a href="{% url 'products' %}?category=contemporary" class="btn btn-outline-primary w-100">
              View Collection
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Quality Standards -->
<section class="quality-section py-5 py-lg-6 bg-light">
  <div class="container">
    <div class="text-center mb-5" data-aos="fade-up">
      <h2 class="display-5 fw-bold mb-3">Crafted with <span class="text-primary">Precision</span></h2>
      <p class="lead text-muted mx-auto" style="max-width: 600px;">
        Choose from our quality tiers by knot density per square inch
      </p>
    </div>
    
    <div class="row g-4 justify-content-center">
      <div class="col-md-4" data-aos="fade-up">
        <div class="card border-0 shadow-sm h-100">
          <div class="card-body text-center p-4">
            <h3 class="display-4 fw-bold text-primary mb-2">60</h3>
            <p class="text-muted mb-3">Knots per square inch</p>
            <ul class="list-unstyled text-start mb-4">
              <li class="mb-2"><i class="bi bi-check-circle text-primary me-2"></i>45 Days Delivery</li>
              <li class="mb-2"><i class="bi bi-check-circle text-primary me-2"></i>Excellent Durability</li>
              <li><i class="bi bi-check-circle text-primary me-2"></i>Traditional Craftsmanship</li>
            </ul>
            <a href="{% url 'contact_us' %}" class="btn btn-outline-primary w-100">
              Request Quote
            </a>
          </div>
        </div>
      </div>
      
      <div class="col-md-4" data-aos="fade-up" data-aos-delay="100">
        <div class="card border-primary border-2 shadow-sm h-100">
          <div class="card-body text-center p-4">
            <h3 class="display-4 fw-bold text-primary mb-2">80</h3>
            <p class="text-muted mb-3">Knots per square inch</p>
            <ul class="list-unstyled text-start mb-4">
              <li class="mb-2"><i class="bi bi-check-circle text-primary me-2"></i>60 Days Delivery</li>
              <li class="mb-2"><i class="bi bi-check-circle text-primary me-2"></i>Finer Details</li>
              <li><i class="bi bi-check-circle text-primary me-2"></i>Enhanced Comfort</li>
            </ul>
            <a href="{% url 'contact_us' %}" class="btn btn-primary w-100">
              Request Quote
            </a>
          </div>
        </div>
      </div>
      
      <div class="col-md-4" data-aos="fade-up" data-aos-delay="200">
        <div class="card border-0 shadow-sm h-100">
          <div class="card-body text-center p-4">
            <h3 class="display-4 fw-bold text-primary mb-2">100</h3>
            <p class="text-muted mb-3">Knots per square inch</p>
            <ul class="list-unstyled text-start mb-4">
              <li class="mb-2"><i class="bi bi-check-circle text-primary me-2"></i>90 Days Delivery</li>
              <li class="mb-2"><i class="bi bi-check-circle text-primary me-2"></i>Superior Softness</li>
              <li><i class="bi bi-check-circle text-primary me-2"></i>Heirloom Quality</li>
            </ul>
            <a href="{% url 'contact_us' %}" class="btn btn-outline-primary w-100">
              Request Quote
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Process Timeline -->
<section class="process-section py-5 py-lg-6">
  <div class="container">
    <div class="text-center mb-5" data-aos="fade-up">
      <h2 class="display-5 fw-bold mb-3">The <span class="text-primary">Art</span> of Tibetan Carpet Making</h2>
    </div>
    
    <div class="row g-3 g-md-4 justify-content-center">
      <div class="col-6 col-md-4 col-lg-3" data-aos="fade-up">
        <div class="process-step text-center p-3 rounded-3 border border-light-subtle bg-white h-100">
          <div class="step-icon bg-primary bg-opacity-10 rounded-3 p-3 mb-3 d-inline-flex">
            <i class="bi bi-snow text-primary fs-4"></i>
          </div>
          <h6 class="fw-bold mb-2">Wool Selection</h6>
          <p class="small text-muted mb-0">High-altitude Tibetan sheep wool</p>
        </div>
      </div>
      
      <div class="col-6 col-md-4 col-lg-3" data-aos="fade-up" data-aos-delay="100">
        <div class="process-step text-center p-3 rounded-3 border border-light-subtle bg-white h-100">
          <div class="step-icon bg-primary bg-opacity-10 rounded-3 p-3 mb-3 d-inline-flex">
            <i class="bi bi-droplet text-primary fs-4"></i>
          </div>
          <h6 class="fw-bold mb-2">Natural Dyeing</h6>
          <p class="small text-muted mb-0">Traditional dye methods</p>
        </div>
      </div>
      
      <div class="col-6 col-md-4 col-lg-3" data-aos="fade-up" data-aos-delay="200">
        <div class="process-step text-center p-3 rounded-3 border border-light-subtle bg-white h-100">
          <div class="step-icon bg-primary bg-opacity-10 rounded-3 p-3 mb-3 d-inline-flex">
            <i class="bi bi-brush text-primary fs-4"></i>
          </div>
          <h6 class="fw-bold mb-2">Tibetan Knotting</h6>
          <p class="small text-muted mb-0">Unique loop technique</p>
        </div>
      </div>
      
      <div class="col-6 col-md-4 col-lg-3" data-aos="fade-up" data-aos-delay="300">
        <div class="process-step text-center p-3 rounded-3 bg-primary text-white h-100">
          <div class="step-icon bg-white bg-opacity-25 rounded-3 p-3 mb-3 d-inline-flex">
            <i class="bi bi-play-circle fs-4"></i>
          </div>
          <h6 class="fw-bold mb-2">View Process</h6>
          <a href="{% url 'manufacturing' %}" class="btn btn-sm btn-outline-light mt-2">
            Learn More
          </a>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Contact Section - Full Width Form -->
<section class="contact-section py-5 py-lg-6 bg-light">
  <div class="container">
    <div class="text-center mb-5" data-aos="fade-up">
      <h2 class="display-5 fw-bold mb-3">Start Your <span class="text-primary">Journey</span></h2>
      <p class="lead text-muted mb-5">
        Contact us for custom orders, quotes, or questions about our Tibetan carpets
      </p>
    </div>
    
    <div class="row justify-content-center" data-aos="fade-up">
      <div class="col-12">
        <div class="card border-0 shadow-sm">
          <div class="card-body p-4 p-lg-5">
            <div class="row align-items-center">
              <div class="col-lg-6 mb-4 mb-lg-0">
                <h3 class="h3 fw-bold mb-3 text-primary">Get Your Custom Quote</h3>
                <p class="text-muted mb-4">
                  Fill out our enquiry form and our experts will get back to you within 24 hours with a personalized quote and design consultation.
                </p>
                <div class="contact-info">
                  <div class="d-flex align-items-center mb-3">
                    <div class="contact-icon bg-primary bg-opacity-10 rounded-circle p-2 me-3">
                      <i class="bi bi-telephone text-primary fs-5"></i>
                    </div>
                    <div>
                      <div class="small text-muted">Call Us</div>
                      <div class="fw-bold">+977-1-415414</div>
                    </div>
                  </div>
                  <div class="d-flex align-items-center mb-3">
                    <div class="contact-icon bg-primary bg-opacity-10 rounded-circle p-2 me-3">
                      <i class="bi bi-whatsapp text-primary fs-5"></i>
                    </div>
                    <div>
                      <div class="small text-muted">WhatsApp</div>
                      <div class="fw-bold">+977-9841XXXXXX</div>
                    </div>
                  </div>
                  <div class="d-flex align-items-center">
                    <div class="contact-icon bg-primary bg-opacity-10 rounded-circle p-2 me-3">
                      <i class="bi bi-envelope text-primary fs-5"></i>
                    </div>
                    <div>
                      <div class="small text-muted">Email Us</div>
                      <div class="fw-bold">info@everestcarpets.com</div>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="col-lg-6">
                <form class="enquiry-form" method="post" action="{% url 'contact_us' %}">
                  {% csrf_token %}
                  <div class="row g-3">
                    <div class="col-md-6">
                      <div class="form-group">
                        <label class="form-label small text-muted mb-2">Full Name *</label>
                        <input type="text" class="form-control form-control-lg" name="name" placeholder="John Smith" required>
                      </div>
                    </div>
                    
                    <div class="col-md-6">
                      <div class="form-group">
                        <label class="form-label small text-muted mb-2">Email Address *</label>
                        <input type="email" class="form-control form-control-lg" name="email" placeholder="john@example.com" required>
                      </div>
                    </div>
                    
                    <div class="col-md-6">
                      <div class="form-group">
                        <label class="form-label small text-muted mb-2">Phone Number</label>
                        <input type="tel" class="form-control form-control-lg" name="phone" placeholder="+977 (123) 456-7890">
                      </div>
                    </div>
                    
                    <div class="col-md-6">
                      <div class="form-group">
                        <label class="form-label small text-muted mb-2">Country</label>
                        <input type="text" class="form-control form-control-lg" name="country" placeholder="Your Country">
                      </div>
                    </div>
                    
                    <div class="col-12">
                      <div class="form-group">
                        <label class="form-label small text-muted mb-2">Interested In *</label>
                        <select class="form-select form-control-lg" name="interest" required>
                          <option value="">Select your interest</option>
                          <option value="traditional">Traditional Tibetan Carpets</option>
                          <option value="antique">Antique Reproductions</option>
                          <option value="contemporary">Contemporary Designs</option>
                          <option value="custom">Custom Design Order</option>
                          <option value="wholesale">Wholesale/Bulk Order</option>
                          <option value="other">Other Inquiry</option>
                        </select>
                      </div>
                    </div>
                    
                    <div class="col-12">
                      <div class="form-group">
                        <label class="form-label small text-muted mb-2">Project Details *</label>
                        <textarea class="form-control form-control-lg" name="message" rows="3" 
                                  placeholder="Tell us about your project (size, design preferences, timeline, budget, etc.)" required></textarea>
                      </div>
                    </div>
                    
                    <div class="col-12">
                      <button type="submit" class="btn btn-primary btn-lg w-100 py-3">
                        <i class="bi bi-send me-2"></i> Submit Enquiry
                      </button>
                    </div>
                    
                    <div class="col-12">
                      <p class="text-center text-muted small mt-3">
                        <i class="bi bi-shield-check me-1"></i>
                        Your information is secure and confidential. We'll contact you within 24 hours.
                      </p>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
/* Updated CSS with new deep blue color (#0a192f) */
:root {
  --bs-primary: #0a192f;
  --bs-primary-rgb: 10, 25, 47;
  --bs-light: #f8f9fa;
  --bs-light-subtle: #f9fafb;
  --primary-hover: #0d2240;
  --primary-light: rgba(10, 25, 47, 0.1);
  --primary-light-25: rgba(10, 25, 47, 0.25);
}

/* Override Bootstrap primary color */
.text-primary {
  color: #0a192f !important;
}

.bg-primary {
  background-color: #0a192f !important;
}

.border-primary {
  border-color: #0a192f !important;
}

.btn-primary {
  background-color: #0a192f;
  border-color: #0a192f;
  color: white;
}

.btn-primary:hover,
.btn-primary:focus,
.btn-primary:active {
  background-color: #0d2240;
  border-color: #0d2240;
  color: white;
}

.btn-outline-primary {
  color: #0a192f;
  border-color: #0a192f;
}

.btn-outline-primary:hover {
  background-color: #0a192f;
  border-color: #0a192f;
  color: white;
}

/* Hero Section */
.hero-section::before {
  background: linear-gradient(135deg, rgba(10, 25, 47, 0.05) 0%, transparent 100%);
}

.hero-content-container {
  border-left: 4px solid #0a192f;
}

/* Floating badge */
.floating-badge {
  background-color: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
}

/* Card styling */
.card.border-primary {
  border-width: 2px !important;
}

/* Feature cards */
.feature-card:hover {
  border-color: #0a192f !important;
  transform: translateY(-3px);
  transition: all 0.3s ease;
}

/* Process steps */
.process-step.bg-primary {
  background-color: #0a192f !important;
}

/* Form styling */
.form-control:focus,
.form-select:focus {
  border-color: #0a192f;
  box-shadow: 0 0 0 0.25rem rgba(10, 25, 47, 0.25);
}

/* Contact section */
.enquiry-form .form-control-lg,
.enquiry-form .form-select {
  border: 1px solid #dee2e6;
  border-radius: 0.5rem;
  padding: 0.75rem 1rem;
}

.enquiry-form .form-control-lg:focus,
.enquiry-form .form-select:focus {
  border-color: #0a192f;
  box-shadow: 0 0 0 0.25rem rgba(10, 25, 47, 0.1);
}

.contact-icon {
  width: 44px;
  height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Button hover effects */
.btn {
  transition: all 0.3s ease;
}

.btn-primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(10, 25, 47, 0.2);
}

.btn-outline-primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(10, 25, 47, 0.1);
}

/* Card hover effects */
.card {
  transition: all 0.3s ease;
}

.card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 30px rgba(10, 25, 47, 0.1) !important;
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .hero-section .container {
    padding-top: 1.5rem;
    padding-bottom: 1.5rem;
  }
  
  .hero-content-container {
    padding: 1.25rem !important;
    border-left: 3px solid #0a192f;
  }
  
  .display-4 {
    font-size: 1.75rem;
  }
  
  .display-5 {
    font-size: 1.5rem;
  }
  
  .enquiry-form .row {
    margin-left: -0.5rem;
    margin-right: -0.5rem;
  }
  
  .enquiry-form .col-md-6,
  .enquiry-form .col-12 {
    padding-left: 0.5rem;
    padding-right: 0.5rem;
  }
}

/* Animation for form focus */
.form-group {
  position: relative;
}

.form-group:focus-within label {
  color: #0a192f !important;
  font-weight: 500;
}

/* Loading animation for images */
img {
  opacity: 0;
  transition: opacity 0.3s ease;
}

img.loaded {
  opacity: 1;
}

/* Star icon color */
.bi-star-fill.text-primary {
  color: #0a192f !important;
}

/* Badge styling */
.badge.bg-primary {
  background-color: #0a192f !important;
}

.bg-primary.bg-opacity-10 {
  background-color: rgba(10, 25, 47, 0.1) !important;
}
</style>

<script>
// Optimized JavaScript
document.addEventListener('DOMContentLoaded', function() {
  // Initialize AOS
  if (typeof AOS !== 'undefined') {
    AOS.init({
      duration: 400,
      once: true,
      offset: 100,
      disable: window.innerWidth < 768
    });
  } else {
    // Load AOS dynamically if not present
    const script = document.createElement('script');
    script.src = 'https://unpkg.com/aos@2.3.1/dist/aos.js';
    script.onload = function() {
      AOS.init({
        duration: 400,
        once: true,
        offset: 100,
        disable: window.innerWidth < 768
      });
    };
    document.head.appendChild(script);
    
    const link = document.createElement('link');
    link.rel = 'stylesheet';
    link.href = 'https://unpkg.com/aos@2.3.1/dist/aos.css';
    document.head.appendChild(link);
  }

  // Image loading optimization
  const images = document.querySelectorAll('img');
  images.forEach(img => {
    if (img.complete) {
      img.classList.add('loaded');
    } else {
      img.addEventListener('load', function() {
        this.classList.add('loaded');
      });
    }
  });

  // Form validation
  const forms = document.querySelectorAll('.needs-validation, .enquiry-form');
  forms.forEach(form => {
    form.addEventListener('submit', function(e) {
      if (!form.checkValidity()) {
        e.preventDefault();
        e.stopPropagation();
        
        // Highlight invalid fields
        const invalidFields = form.querySelectorAll(':invalid');
        invalidFields.forEach(field => {
          field.style.borderColor = '#dc3545';
        });
      }
      form.classList.add('was-validated');
    });

    // Remove error styling on input
    form.querySelectorAll('input, select, textarea').forEach(field => {
      field.addEventListener('input', function() {
        if (this.checkValidity()) {
          this.style.borderColor = '';
        }
      });
    });
  });

  // Smooth scrolling for anchor links
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function(e) {
      const href = this.getAttribute('href');
      if (href !== '#') {
        e.preventDefault();
        const target = document.querySelector(href);
        if (target) {
          window.scrollTo({
            top: target.offsetTop - 80,
            behavior: 'smooth'
          });
        }
      }
    });
  });

  // Add hover effect to cards
  document.querySelectorAll('.card').forEach(card => {
    card.addEventListener('mouseenter', function() {
      this.style.zIndex = '10';
    });
    
    card.addEventListener('mouseleave', function() {
      this.style.zIndex = '';
    });
  });

  // Auto-fill country based on IP (optional)
  const countryInput = document.querySelector('input[name="country"]');
  if (countryInput && !countryInput.value) {
    fetch('https://ipapi.co/json/')
      .then(response => response.json())
      .then(data => {
        if (data.country_name) {
          countryInput.value = data.country_name;
        }
      })
      .catch(() => {
        // Fallback if API fails
        countryInput.placeholder = "Enter your country";
      });
  }
});
</script>
{% endblock %}